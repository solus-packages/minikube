name       : minikube
version    : 1.3.1
release    : 13
source     :
    - git|https://github.com/kubernetes/minikube.git : v1.3.1
license    : Apache-2.0
component  : system.tools
summary    : Kubernetes development environment
networking : yes
extract    : no
description: |
    Minikube makes it easy to create all in one VirtualBox VMs with kubernetes for local development.
builddeps  :
    - golang
    - libvirt-devel
environment: |
    export GOPATH=$workdir
    export PATH=$PATH:$GOPATH/bin
    export MINIKUBE=$workdir/src/k8s.io/minikube
setup      : |
    mkdir -p {pkg,src/k8s.io/}
    cp -R $sources/minikube.git $MINIKUBE
    cd $MINIKUBE

    # pre-fetch go-bindata manually (replace dead fork with maintained one)
    GO111MODULE=off GOBIN=$GOPATH/bin go get github.com/shuLhan/go-bindata/...
build      : |
    cd $MINIKUBE
    %make
check      : |
    cd $MINIKUBE
    %make test
install    : |
    install -D -d -m 00755 $installdir/usr/bin
    install -D -m 00755 $MINIKUBE/out/minikube $installdir/usr/bin/minikube
    # Install completion scripts
    $MINIKUBE/out/minikube completion bash > minikube-bash-completion
    $MINIKUBE/out/minikube completion zsh > minikube-zsh-completion
    install -Dm00644 minikube-bash-completion $installdir/usr/share/bash-completion/completions/minikube
    install -Dm00644 minikube-zsh-completion $installdir/usr/share/zsh/site-functions/_minikube
